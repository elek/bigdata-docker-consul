version: "2"
services:
   namenode:
      image: elek/hadoop-hdfs-namenode
      network_mode: host
      volumes:
         - "{{env.DATA_DIR}}:/data"
      environment:
         CONFIG_TYPE: "consul"
         CONSUL_KEY: "hdfs"
   datanode:
      image: elek/hadoop-hdfs-datanode
      volumes:
         - "{{env.DATA_DIR}}:/data"
      network_mode: host
      environment:
         CONFIG_TYPE: "consul"
         CONSUL_KEY: "hdfs"
   resourcemanager:
      image: elek/hadoop-yarn-resourcemanager
      network_mode: host
      environment:
         CONFIG_TYPE: "consul"
         CONSUL_KEY: "yarn"
   nodemanager:
      image: elek/hadoop-yarn-nodemanager
      network_mode: host
      environment:
         CONFIG_TYPE: "consul"
         CONSUL_KEY: "yarn"
   zeppelin:
      image: elek/zeppelin
      network_mode: host
      environment:
         CONFIG_TYPE: "consul"
         CONSUL_KEY: "zeppelin"
   zookeeper:
      image: elek/zookeeper
      network_mode: host
      volumes:
         - "/tmp:/data"
      environment:
         CONFIG_TYPE: "consul"
         CONSUL_KEY: "zookeeper"
   hbasemaster:
      image: elek/hbase-master
      network_mode: host
      environment:
         CONFIG_TYPE: "consul"
         CONFIG_KEY: "hbase"
   hbaseregion:
      image: elek/hbase-regionserver
      network_mode: host
      environment:
         CONFIG_TYPE: "consul"
         CONFIG_KEY: "hbase"
   sparkmaster:
      image: elek/spark-master
      network_mode: host
      environment:
         CONFIG_TYPE: "consul"
   weavescope:
       image: weaveworks/scope:1.1.0
       privileged: true
       network_mode: host
       pid: "host"
       volumes:
           - "/var/run/docker.sock:/var/run/docker.sock"
           - "/var/run/scope/plugins:/var/run/scope/plugins"
       environment:
          CHECKPOINT_DISABLE:
       command: "--probe.docker=true melek-manual8-1 melek-manual8-2 melek-manual8-3 melek-manual8-4 melek-manual8-5"
